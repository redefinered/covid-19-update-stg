(this["webpackJsonpcovid-19-update"]=this["webpackJsonpcovid-19-update"]||[]).push([[0],{209:function(e,t,a){e.exports=a(403)},214:function(e,t,a){},215:function(e,t,a){},295:function(e,t,a){},307:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},381:function(e,t,a){},403:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=(a(214),a(25)),s=a(26),u=a(28),l=a(27),m=a(408),d=a(409),h=function(){return r.a.createElement(m.a,{className:"d-flex align-items-center justify-content-center",style:{height:200}},r.a.createElement(d.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},p=(a(215),function(e){var t=e.small,a=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-muted small-label"},t),r.a.createElement("h3",{className:"mb-3"},a))});p.defaultProps={small:"Some Cool Small Intro",title:"Heading Title"};var f,g,b=p,v=a(410),y=a(23),E=a.n(y),O=a(17),j=function(e){return e?e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):0},C=(a(295),Object(O.b)((function(e){return{data:e.casesReducer.herokuAllStatus}}))((function(e){var t=e.data,a=E()(t,(function(e){return"World"===e.country})),n=[{key:"cases",label:"Confirmed Cases",variant:"light"},{key:"todayCases",label:"New Cases",variant:"light"},{key:"deaths",label:"Deaths",variant:"light"},{key:"recovered",label:"Recoveries",variant:"light"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,n.map((function(e){return r.a.createElement("th",{key:e.key,className:"".concat(e.key,"-label")},e.label)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,n.map((function(e){return r.a.createElement("td",{key:e.key},j(a[e.key]))}))))))}))),k=a(12),A=function(e){var t=e.data,a=e.width,c=e.height,o=e.margin,i=r.a.createRef();return Object(n.useEffect)((function(){Object(k.j)("svg#chart-canvas").remove();var e=a-o.left-o.right,n=c-o.top-o.bottom,r=Object(k.j)(i).append("svg").attr("id","chart-canvas").attr("width",e+o.left+o.right).attr("height",n+o.top+o.bottom).append("g").attr("transform","translate(".concat(o.left,", ").concat(o.top,")")),s=Object(k.i)().range([0,e]),u=Object(k.h)().range([n,0]);s.domain(Object(k.d)(t,(function(e){return new Date(e.Date)}))),u.domain([Object(k.g)(t,(function(e){return e.Confirmed})),Object(k.f)(t,(function(e){return e.Confirmed}))]);var l=Object(k.a)(s).ticks(5),m=Object(k.b)(u).ticks(5).tickSize(-e).tickFormat("");m.tickValues(u.ticks(5).concat(u.domain())),r.append("g").attr("class","x axis").attr("transform","translate(0, ".concat(n,")")).call(l);var d=r.append("g").attr("class","y axis").attr("transform","translate(0, 0)").call(m);d.select(".domain").remove(),d.selectAll(".tick").attr("color","lightgray")}),[t,a,c,o,i,"Confirmed"]),r.a.createElement("div",{className:"element",ref:function(e){i=e}})},w={Confirmed:"#17a2b8",Deaths:"#dc3545",Recovered:"#28a745"},S=function(e){var t=e.field,a=e.data,c=e.width,o=e.height,i=e.margin,s=e.color,u=r.a.createRef();return Object(n.useEffect)((function(){Object(k.j)("svg#".concat(t.toLowerCase())).remove();var e=c-i.left-i.right,n=o-i.top-i.bottom,r=Object(k.j)(u).append("svg").attr("id","".concat(t.toLowerCase())).attr("width",e+i.left+i.right).attr("height",n+i.top+i.bottom).append("g").attr("transform","translate(".concat(i.left,", ").concat(i.top,")")),s=Object(k.i)().range([0,e]),l=Object(k.h)().range([n,0]);s.domain(Object(k.d)(a,(function(e){return new Date(e.Date)}))),l.domain([Object(k.g)(a,(function(e){return e.Confirmed})),Object(k.f)(a,(function(e){return e.Confirmed}))]);var m=Object(k.e)().curve(k.c).defined((function(e){return e[t]})).x((function(e){return s(new Date(e.Date))})).y((function(e){return l(e[t])}));r.append("path").datum(a).attr("fill","none").attr("stroke",w[t]).attr("stroke-width",2).attr("d",m)}),[a,c,o,i,u,t,s]),r.a.createElement("div",{className:"element",ref:function(e){u=e}})},_=a(50),D=a(163),R=a(151),T=a.n(R),x=a(152),F=a.n(x),I=(a(307),Object(O.b)((function(e){return{data:e.casesReducer.countries}}))((function(e){var t=e.isFetching,a=e.data,n=e.handleSelect,c=e.selectedCountry,o=e.handleSearch,i=e.searchString,s=[];return T()(a,(function(e){return F()(e.slug,i.toLowerCase())})).map((function(e){s.push(r.a.createElement(_.a.Item,{key:e.name,value:e.name,active:e.name===c,onClick:function(e){return n(e)}},e.name))})),r.a.createElement(_.a,null,r.a.createElement(_.a.Toggle,{variant:"primary",id:"dropdown-basic"},t?"Fetching...":c),r.a.createElement(_.a.Menu,null,r.a.createElement("div",{className:"px-4 my-2"},r.a.createElement(D.a.Control,{onChange:function(e){return o(e)},type:"search",placeholder:"Search your country..."})),r.a.createElement("div",{className:"dropdown-menu-list"},s)))}))),N=a(412),L=a(34),P=Object(L.createActions)({getInitialData:[],getInitialDataSuccess:["data"],getInitialDataFailure:["error"],setCountry:["country"],setCountries:["countries"],getCasesByCountry:["country"],getCasesByCountrySuccess:["data"],getCasesByCountryFailure:["error"]},{prefix:"@Cases/"}),U=P.Types,B=P.Creators,Y=(a(363),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSelect=function(e){n.props.setCountryAction(e.target.getAttribute("value"))},n.handleSearch=function(e){n.setState({searchString:e.target.value})},n.setWidth=function(){n.setState({width:n.canvas.current.clientWidth,height:400})},n.renderChart=function(e){var t=e.casesFromDayOne,a=e.width,c=e.height;return r.a.createElement("div",{className:"chart-container",style:{height:c}},r.a.createElement(A,{data:t,width:a,height:c,margin:n.margin}),r.a.createElement(S,{field:"Confirmed",data:t,width:a,height:c,margin:n.margin}),r.a.createElement(S,{field:"Recovered",data:t,width:a,height:c,margin:n.margin}),r.a.createElement(S,{field:"Deaths",data:t,width:a,height:c,margin:n.margin}))},n.state={searchString:"",width:0,height:0},n.margin={top:40,right:0,bottom:20,left:30},n.canvas=r.a.createRef(),n.gutter=30,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setWidth()}},{key:"render",value:function(){var e=this.state,t=e.searchString,a=e.width,n=e.height,c=this.props,o=c.error,i=c.isFetching,s=c.selectedCountry,u=c.casesFromDayOne;return i?r.a.createElement(h,null):o?r.a.createElement(N.a,{variant:"danger"},o):r.a.createElement("div",{ref:this.canvas},r.a.createElement(b,{small:"What the curve looks like",title:"Data Visualization"}),r.a.createElement(I,{isFetching:i,handleSelect:this.handleSelect,selectedCountry:s,handleSearch:this.handleSearch,searchString:t}),u.length?this.renderChart({casesFromDayOne:u,width:a,height:n}):null)}}]),a}(r.a.Component)),W={setCountryAction:B.setCountry},G=Object(O.b)((function(e){return{casesFromDayOne:e.casesReducer.casesFromDayOne}}),W)(Y),M=a(104),K=a.n(M),z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).tick=function(){n.setState({time:K()()})},n.state={time:K()()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timeInterval=setInterval((function(){e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeInterval)}},{key:"render",value:function(){var e=this.state.time;return r.a.createElement("div",{className:"time"},r.a.createElement("p",null,"As of ",r.a.createElement("strong",null,"".concat(e.format("dddd, D MMM YYYY")," ").concat(e.format("hh:mm:ss A")))))}}]),a}(r.a.Component),H=a(413),V=(a(364),function(e){var t=e.title,a=e.value,n=e.color,c=e.light;return r.a.createElement(H.a,{text:c?"black":"white",bg:n,className:"mb-4"},r.a.createElement(H.a.Body,{className:"text-center my-4"},r.a.createElement(H.a.Title,null,r.a.createElement("strong",null,t)),r.a.createElement(H.a.Text,{className:"figure"},j(a))))}),J=a(411),$=a(156),q=function(e){var t=e.data,a=e.country,n=E()(t,(function(e){return e.country===a})),c=Object.keys(n),o=[{key:"cases",label:"Confirmed Cases",variant:"info"},{key:"todayCases",label:"New Cases",variant:"warning"},{key:"deaths",label:"Deaths",variant:"danger"},{key:"recovered",label:"Recoveries",variant:"success"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{small:"Cases in ".concat(a),title:"Country Overview"}),r.a.createElement(J.a,null,c.map((function(e){var t=E()(o,(function(t){return t.key===e}));if(void 0!==t)return r.a.createElement($.a,{key:e},r.a.createElement(V,{title:t.label,value:n[e],color:t.variant}))}))))},Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.country;return r.a.createElement("div",null,r.a.createElement("h1",null,"Covid-19 Updates"),r.a.createElement(z,null),r.a.createElement("p",{className:"lead"},"This page updates everyday so you stay updated on the global situation regarding the Coronovirus pandemic"),0!==t.length&&a?r.a.createElement(q,{country:a,data:t}):r.a.createElement(h,null))}}]),a}(r.a.Component),X=a(157),Z=a.n(X),ee=Object(O.b)((function(e){return{data:e.casesReducer.herokuAllStatus}}))((function(e){var t=e.data,a=Z()(t,1,11);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{small:"10 countries with most cases",title:"Largest Cases"}),r.a.createElement(v.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Country"),r.a.createElement("th",null,"Confirmed Cases"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e.country},r.a.createElement("td",null,e.country),r.a.createElement("td",null,j(e.cases)))})))))})),te=a(158),ae=a.n(te),ne=[{country:"USA",slug:"united-states"},{country:"Hong Kong",slug:"hong-kong-sar-china"}],re=(a(381),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={searchString:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.getInitialDataAction()}},{key:"componentDidUpdate",value:function(e){var t=this;if(console.log("props",this.props),e.herokuData!==this.props.herokuData){var a=function(e){var t=[];return t=e.map((function(e){var t=e.country.toLowerCase().split(" ").join("-"),a=E()(ne,(function(t){return t.country===e.country}));return a&&(t=a.slug),{name:e.country,slug:t}})),t=ae()(t,(function(e){return e.name}))}(this.props.herokuData);this.props.setCountriesAction(a)}if(this.props.selectedCountry&&this.props.countries.length&&e.countries!==this.props.countries){var n=E()(this.props.countries,(function(e){return e.name===t.props.selectedCountry})).slug;this.props.getCasesByCountryAction(n)}if(e.selectedCountry!==this.props.selectedCountry){var r=E()(this.props.countries,(function(e){return e.name===t.props.selectedCountry}));r&&this.props.getCasesByCountryAction(r.slug)}}},{key:"render",value:function(){var e=this.props,t=e.error,a=e.isFetching,n=e.herokuData,c=e.selectedCountry,o=e.countries;return a||!c||0===n.length?r.a.createElement(h,null):t?r.a.createElement(N.a,{variant:"danger"},t):r.a.createElement(m.a,{fluid:!0},r.a.createElement(J.a,{className:"my-3"},r.a.createElement($.a,{lg:"9",className:"main"},r.a.createElement(J.a,null,r.a.createElement($.a,{lg:"4"},r.a.createElement(Q,{country:c,data:n})),r.a.createElement($.a,{lg:"8"},r.a.createElement(b,{small:"Worldwide",title:"World Overview"}),r.a.createElement(C,null),r.a.createElement(G,{error:t,countries:o,selectedCountry:c,isFetching:a,herokuData:n})))),r.a.createElement($.a,{lg:"3",className:"sidebar"},r.a.createElement(ee,null))),r.a.createElement("footer",{className:"py-3"},r.a.createElement("p",{className:"text-muted"},"\xa9 reddeguzman | ","v".concat("1.0.2-beta.0"))))}}]),a}(r.a.Component)),ce={getInitialDataAction:B.getInitialData,setCountriesAction:B.setCountries,getCasesByCountryAction:B.getCasesByCountry},oe=Object(O.b)((function(e){var t=e.casesReducer;return{error:t.error,isFetching:t.isFetching,selectedCountry:t.country,countries:t.countries,herokuData:t.herokuAllStatus}}),ce)(re),ie=Object(O.b)((function(e){return{isLoading:e.appReducer.isLoading}}),null)((function(e){return e.isLoading?r.a.createElement("p",null,"Getting the app ready..."):r.a.createElement(oe,null)})),se=a(159),ue=a(19),le=a(39),me=a(166),de=(a(160),a(105)),he=a.n(de),pe=a(15),fe=a(9),ge=Object(L.createActions)({appReady:null,appReadySuccess:null,appReadyFailure:["error"],default:null},{}),be=ge.Types,ve=ge.Creators,ye={isLoading:!0,error:null},Ee=Object(L.createReducer)(ye,(f={},Object(pe.a)(f,be.APP_READY,(function(e){return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!0})})),Object(pe.a)(f,be.APP_READY_SUCCESS,(function(e){return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1})})),Object(pe.a)(f,be.APP_READY_FAILURE,(function(e,t){return Object(fe.a)(Object(fe.a)({},e),{},{error:t.error,isLoading:!1})})),Object(pe.a)(f,be.DEFAULT,(function(){return Object(fe.a)(Object(fe.a)({},ye),{},{isLoading:!1})})),f)),Oe=Object(L.createReducer)({error:null,isFetching:!1,country:null,countries:[],casesFromDayOne:[],herokuAllStatus:[]},(g={},Object(pe.a)(g,U.SET_COUNTRY,(function(e,t){return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!1,country:t.country})})),Object(pe.a)(g,U.SET_COUNTRIES,(function(e,t){var a=t.countries;return Object(fe.a)(Object(fe.a)({},e),{},{countries:a})})),Object(pe.a)(g,U.GET_INITIAL_DATA,(function(e){return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!0})})),Object(pe.a)(g,U.GET_INITIAL_DATA_SUCCESS,(function(e,t){var a=t.data,n=a.country,r=a.herokuAllStatus;return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!1,country:n,herokuAllStatus:r,error:null})})),Object(pe.a)(g,U.GET_INITIAL_DATA_FAILURE,(function(e,t){return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!1,error:t.error})})),Object(pe.a)(g,U.GET_CASES_BY_COUNTRY,(function(e){return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!0})})),Object(pe.a)(g,U.GET_CASES_BY_COUNTRY_SUCCESS,(function(e,t){var a=t.data.casesFromDayOne;return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!1,casesFromDayOne:a,error:null})})),Object(pe.a)(g,U.GET_CASES_BY_COUNTRY_FAILURE,(function(e,t){return Object(fe.a)(Object(fe.a)({},e),{},{isFetching:!1,error:t.error})})),g)),je={key:"primary",storage:he.a,whitelist:["casesReducer"]},Ce=Object(le.b)(je,{appReducer:Ee,casesReducer:Oe}),ke=function(e,t){return"PURGE_STORE"===t.type&&(he.a.removeItem("persist:primary"),e=void 0),Ce(e,t)},Ae=a(11),we=a.n(Ae),Se=a(13),_e=we.a.mark(Re),De=we.a.mark(Te);function Re(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Se.d)(ve.appReadySuccess());case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(Se.d)(ve.appReadyFailure(e.t0.message));case 9:case"end":return e.stop()}}),_e,null,[[0,5]])}function Te(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.e)(le.a,Re);case 2:case"end":return e.stop()}}),De)}var xe=a(73),Fe=a(74),Ie=a.n(Fe),Ne=Object({NODE_ENV:"production",PUBLIC_URL:"/covid-19-update-stg",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VERSION:"1.0.2-beta.0",REACT_APP_GEOLOCATION_DB_API_KEY:"0f761a30-fe14-11e9-b59f-e53803842572",REACT_APP_HEROKU_URL:"https://coronavirus-19-api.herokuapp.com/countries",REACT_APP_API_URL:"https://api.covid19api.com"}),Le=Ne.REACT_APP_GEOLOCATION_DB_API_KEY,Pe=Ne.REACT_APP_API_URL,Ue=function(){var e=Object(xe.a)(we.a.mark((function e(){var t,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.a.get("https://geolocation-db.com/json/".concat(Le));case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(xe.a)(we.a.mark((function e(t){var a,n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.a.get("".concat(Pe,"/dayone/country/").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(xe.a)(we.a.mark((function e(){var t,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.a.get("https://coronavirus-19-api.herokuapp.com/countries");case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),We=a(161),Ge=a.n(We),Me=we.a.mark(He),Ke=we.a.mark(Ve),ze=we.a.mark(Je);function He(){var e,t,a;return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Se.b)(Ue);case 3:return e=n.sent,t=e.country_name,n.next=7,Object(Se.b)(Ye);case 7:if(a=n.sent,!Ge()(a)){n.next=10;break}throw new Error("Error: no data available");case 10:return n.next=12,Object(Se.d)(B.getInitialDataSuccess({country:t,herokuAllStatus:a}));case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,Object(Se.d)(B.getInitialDataFailure(n.t0.message));case 18:case"end":return n.stop()}}),Me,null,[[0,14]])}function Ve(e){var t;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Se.b)(Be,e.country);case 3:return t=a.sent,a.next=6,Object(Se.d)(B.getCasesByCountrySuccess({casesFromDayOne:t}));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,Object(Se.d)(B.getCasesByCountryFailure(a.t0.message));case 12:case"end":return a.stop()}}),Ke,null,[[0,8]])}function Je(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.e)(U.GET_INITIAL_DATA,He);case 2:return e.next=4,Object(Se.e)(U.GET_CASES_BY_COUNTRY,Ve);case 4:case"end":return e.stop()}}),ze)}var $e=we.a.mark(qe);function qe(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.a)([Object(Se.c)(Te),Object(Se.c)(Je)]);case 2:case"end":return e.stop()}}),$e)}var Qe=function(){var e,t=null,a=null,n=Object(me.a)();return a=Object(ue.a)(n,routerMiddleware),t=Object(ue.e)(ke,a),n.run(qe),e=Object(le.c)(t,null,(function(){return t.getState()})),{store:t,persistor:e}}(),Xe=Qe.store,Ze=Qe.persistor,et=(a(402),function(){return r.a.createElement(O.a,{store:Xe},r.a.createElement(se.a,{loading:null,persistor:Ze},r.a.createElement("div",{className:"App"},r.a.createElement(ie,null))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[209,1,2]]]);
//# sourceMappingURL=main.d4c39ef3.chunk.js.map